<!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/uploads/icon/drop/128x128.png"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/icon/drop/32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/icon/drop/16x16.png"><link rel="mask-icon" href="/uploads/icon/drop/drop.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="NKt2iJb3Hnl6-Sm7LB-fTT7LRyi9cg5yZrB-zd0ohtk"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"cwscn.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1,width:240},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"manual"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"fadeIn"}},path:"search.xml"}</script><meta name="keywords" content="blog"><meta property="og:type" content="website"><meta property="og:title" content="春夏秋冬"><meta property="og:url" content="https://cwscn.github.io/page/16/index.html"><meta property="og:site_name" content="春夏秋冬"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="春夏秋冬"><link rel="canonical" href="https://cwscn.github.io/page/16/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><link rel="stylesheet" href="//unpkg.com/video.js/dist/video-js.min.css"><link rel="stylesheet" href="/css/videojs-bilibili.css"><style>.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order{display:inline-block}</style><title>春夏秋冬</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">春夏秋冬</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">愿你走出半生 归来仍是少年</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档<span class="badge">277</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类<span class="badge">26</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签<span class="badge">109</span></a></li><li class="menu-item menu-item-收藏"><a href="/favlist/" rel="section"><i class="fa fa-star fa-fw"></i> 收藏</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><meting-js server="netease" type="playlist" id="67155774" theme="#ff5555" loop="all" order="list" preload="none" volume="" mutex="" list-folded="NaN" fixed="true"></meting-js></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/leetcode/recover-binary-search-tree/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/leetcode/recover-binary-search-tree/" class="post-title-link" itemprop="url">Recover Binary Search Tree</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-09 09:41:51" itemprop="dateModified" datetime="2020-08-09T09:41:51+08:00">2020-08-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span></span><span id="/leetcode/recover-binary-search-tree/" class="post-meta-item leancloud_visitors" data-flag-title="Recover Binary Search Tree" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>Two elements of a binary search tree (BST) are swapped by mistake.</p><p>Recover the tree without changing its structure.</p><p>Example 1:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">   1</span><br><span class="line">  /</span><br><span class="line"> 3</span><br><span class="line">  \</span><br><span class="line">   2</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">   3</span><br><span class="line">  /</span><br><span class="line"> 1</span><br><span class="line">  \</span><br><span class="line">   2</span><br></pre></td></tr></table></figure><p>Example 2:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">  3</span><br><span class="line"> / \</span><br><span class="line">1   4</span><br><span class="line">   /</span><br><span class="line">  2</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">  2</span><br><span class="line"> / \</span><br><span class="line">1   4</span><br><span class="line">   /</span><br><span class="line">  3</span><br></pre></td></tr></table></figure><p>Follow up:</p><ul><li>A solution using <code>O(n)</code> space is pretty straight forward.</li><li>Could you devise a constant space solution?</li></ul><h1 id="using-inorder-traversal">Using inorder traversal</h1><p>It would be very easy if you think about this problem:</p><p>Two elements in a sorted array are swapped by mistake, design an algorithm to fix it.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1, 2, 23, 8, 9, 11, 5, 25</span><br><span class="line">      ^             ^</span><br><span class="line">23 &gt; 8: this is the first wrong location</span><br><span class="line">11 &gt; 5: this is the second wrong location</span><br></pre></td></tr></table></figure><p>We can fit the sorted array by swap 23 (the first element on the first wrong location) and 5 (the second element on the second wrong location).</p><p>And there is a special case, only one wrong location exists. In this case, sorted array can be fixed by swap that two elements.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1, 2, 5, 9, 8, 11, 23, 25</span><br><span class="line">         ^  ^</span><br><span class="line">9 &gt; 8</span><br></pre></td></tr></table></figure><div class="post-button"> <a class="btn" href="/leetcode/recover-binary-search-tree/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/protection-proxy/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/protection-proxy/" class="post-title-link" itemprop="url">保护代理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:50" itemprop="dateModified" datetime="2020-08-22T15:34:50+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/protection-proxy/" class="post-meta-item leancloud_visitors" data-flag-title="保护代理" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="java-动态代理">Java 动态代理</h1><p>Java 在 <code>java.lang.reflect</code> 包中有自己的代理支持，利用这个包你可以在运行时动态地创建一个代理类，实现一个或多个接口，并将方法的调用转发到你所指定的类。因为实际代理类是在运行时创建的，我们称这个 Java 技术为：动态代理。</p><p>就和真实世界中大多数的事物一样，它和代理模式的传统定义有一点出入。</p> <img src="http://www.plantuml.com/plantuml/svg/VP4zJy906CVtVeeBamwG22lfB4v6Ht4uoXcgxO7jGIH8GaGO3066OWmQ9GAHI4I83fKNlupN5YU_WgKKhE5bVPxV_L-UY_1X190O8qaW8Z6492OocN2yn0c8uJ51qX7a4DYFXuuHHu3VFv-nB4Wn0AHWI2OIv4WQIEWqZcIoiSca7Ky3E17b8E6ZU1lYi82azIAyYPyWIuCJe2o3FGI5cVs4TRfCYLqfUfPSiLjm3uWnmM8THlDsvnxFLEt_o161ML9dWYprOQR9tEoAjREQ-y2yV1ZXGzPEWAC40HSTr8rotYXsjRkMLiXfvJPL6rHzDdg3hyo52q0Pu2sRjTxfDw-6qjk12KZxJuRoO5GlVuQ581vd2bHLjCwzgKNxUQrJq2llvZA8xGHwiQcLwdDHxop0gAQNolJpTg629MjvKlNALAA30HrLzEiF_QqoxcODfHN4tzaH7LR7Zsqwh6cvflxIS0RtsGSoxsUMMFvLqzqVvrt3-Nu1"><p>因为 Java 已经为你创建了 Proxy 类，所以你需要有办法来告诉 Proxy 类你要做什么。你不能像以前一样把代码放在 Proxy 类中，因为 Proxy 不是你直接实现的。要把代码放在 InvocationHandler 中。InvocationHandler 的工作是相应代理的任何调用。你可以把 InvocationHandler 想成是代理收到方法调用后，请求做实际工作的对象。</p><div class="post-button"> <a class="btn" href="/head-first-design-patterns/protection-proxy/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/virtual-proxy/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/virtual-proxy/" class="post-title-link" itemprop="url">虚拟代理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:50" itemprop="dateModified" datetime="2020-08-22T15:34:50+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/virtual-proxy/" class="post-meta-item leancloud_visitors" data-flag-title="虚拟代理" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入显示-cd-封面">导入：显示 CD 封面</h1><p>我们打算建立一个应用程序，用来战羡你最喜欢的 CD 封面。如果你使用 Swing，可以创建一个 Icon 接口从网络上加载图像。唯一的问题是，<strong>限于连接带宽和网络负载，下载可能需要一些时间，所以在等待图像加载的时候，应该显示一些东西。我们也不希望在等待图像时真个应用程序被挂起</strong>。一旦图像被加载完成，刚才显示的东西应该消失，图像显示出来。</p><p>想做到这样，简单的方式就是利用虚拟代理。虚拟代理可以代理 Icon，管理背景的加载，并在加载未完成时显示“CD 封面加载中，请稍候……”，一旦加载完成，代理就把显示的职责委托给 Icon。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfofu9kVdATZOm0Nix1IgkHGKgXEJYakA4fDBQXNIKqj0Yi8pKqeoD3InodcaPgPdbA1B5YG2JGL90oLgkP9p4ekB5Jnp4zDJmNQ2RC4m6jCyd8O45ELNL99d2iJFDNfw2EUWYu5DvqAuraONITnAeRWqAIirkOGhBxyaLI4dDQr48JyD79HM2Y_sptmsOtrmUMPU-lDPBI2nPtrBd_OlVh-d9oRlwPmLpwUiUDQn_VdKdfTp5ptPqVLinhxdItOzdRtlQNF_uuOcD1DXzbifP2MM9LRe5OECrOCBWyryigFXoOvLoEO0xNs-SJVSj29GCC2DW_e0uind7HEVx5u3LFzaz-Bd4zg0MW00"><div class="post-button"> <a class="btn" href="/head-first-design-patterns/virtual-proxy/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/remote-proxy/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/remote-proxy/" class="post-title-link" itemprop="url">远程代理</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:50" itemprop="dateModified" datetime="2020-08-22T15:34:50+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/remote-proxy/" class="post-meta-item leancloud_visitors" data-flag-title="远程代理" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入糖果机状态监视器">导入：糖果机状态监视器</h1><p>糖果公司 CEO 需要在远程监控糖果机。我们已经得到了可以取得糖果数量的 <code>getCount()</code> 方法和取得糖果机状态的 <code>getState()</code> 方法。我们所需要做的事，就是创建一份能打印出来的报告，然后把它递送给 CEO。让我们现在就开始编码。</p><p>先为 GumballMachine 加上处理位置的支持：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GumballMachine</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 其他实例变量</span></span><br><span class="line">    String location;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GumballMachine</span><span class="params">(String location, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 构造器内的其他代码</span></span><br><span class="line">        <span class="keyword">this</span>.location = location;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getter等其他方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建另一个类：GumballMonitor（糖果监视器），以便取得机器的位置、糖果的库存量以及当前机器的状态，并打印成一份可爱的报告。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GumballMonitor</span> </span>&#123;</span><br><span class="line">    GumballMachine machine;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GumballMonitor</span><span class="params">(GumballMachine machine)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.machine = machine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">report</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 打印报告</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们给 GumballMonitor 一个糖果机的引用，它给我们一份报告。<strong>问题在于监视器和糖果机必须在同一个 JVM 上面执行，但是 CEO 希望在他的桌面上远程监控这些机器</strong>。你不能取得另一个堆的对象的引用，换句话说，你不可以这么写：<code>Duck d = &lt;另一个堆的对象&gt;</code>。变量 d 只能引用当前代码语句的同一堆空间的对象。那该怎么办？</p><p>我们需要<strong>远程代理</strong>（remote proxy）。所谓的代理，就是代表某个真实的对象。在这个案例中，代理就像是糖果机一样，但其实幕后是它利用网络和一个远程的真正糖果机沟通。</p><div class="post-button"> <a class="btn" href="/head-first-design-patterns/remote-proxy/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/proxy-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/proxy-pattern/" class="post-title-link" itemprop="url">代理模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:50" itemprop="dateModified" datetime="2020-08-22T15:34:50+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/proxy-pattern/" class="post-meta-item leancloud_visitors" data-flag-title="代理模式" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>代理要做的：控制和管理访问。你将看到，代理的方式有许多种。代理以通过 Internet 为它们的代理对象搬运的整个方法调用而出名，它也可以代替某些懒惰的对象做一些事情。</p><h1 id="定义代理模式">定义代理模式</h1><p>代理模式为另一个对象提供一个替身或占位符以控制对这个对象的访问。</p><p>使用代理模式创建代表（representative）对象。让代表对象控制某对象的访问，被代理的对象可以是远程的对象、创建开销大的对象或需要安全控制的对象。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfoe4boPbfIQNADZOmCNix1IgkHGKgXEJYakA4fDBQXMAKWjBKujBD3IvQhcISnABYnK2Yl8hAi7AWb8JSs26527OG1bCNSXggz5Km1rIewU7h11L0cml5x8vDhfGmRpyabI5eipqZ1A5_3I8c9N2ivx6PtCweMgVpsfvkcVgyoahtk_fYSbxkh_rnRB6PzEtFTtGzcBzzcSRcrxiNVDyzqoeOW00"><p>Subject 为 RealSubject 和 Proxy 提供了接口。通过实现同一接口，Proxy 在 RealSubject 出现的地方取代它。</p><p>RealSubject 是真正做事的对象，它是被 Proxy 代理和控制访问的对象。</p><p>Proxy 持有 RealSubject 的引用。在某些例子中，Proxy 还会负责 RealSubject 对象的创建与销毁。客户和 RealSubject 的交互都必须通过 Proxy。Proxy 也控制了对 RealSubject 的访问，在某些情况下，我们可能需要这样的控制。这些情况包括 RealSubject 是远程对象、RealSubject 创建开销大，或 RealSubject 需要被保护。</p><h1 id="远程代理">远程代理</h1><p>远程代理可以作为另一个 JVM 上对象给的本地代表。调用代理的方法，会被代理利用网络转发到远程执行，并且结果会通过网络返回给代理，再由代理将结果转给客户。</p> <a href="/head-first-design-patterns/remote-proxy/" title="前往文章">前往文章</a><div class="post-button"> <a class="btn" href="/head-first-design-patterns/proxy-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/state-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/state-pattern/" class="post-title-link" itemprop="url">状态模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:51" itemprop="dateModified" datetime="2020-08-22T15:34:51+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/state-pattern/" class="post-meta-item leancloud_visitors" data-flag-title="状态模式" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入糖果机">导入：糖果机</h1><p>我们认为糖果机的控制器需要如下图般的工作。希望你能用 Java 语言帮我们实现它，而且需要让设计能够尽量有弹性而且好维护，因为将来我们可能要为它增加更多的行为。</p> <img src="http://www.plantuml.com/plantuml/svg/Aov9B4bLK7gsQU6pEPr6fayxsbvEsgYaa5Yia9SVNrYQM5IIMiHL35M4fY8ZiHYe91LPoTCfwvwsxtg-UTgpUNF0QehpSr9WaX1Xe9BdUrlWal7vfILSI2OfwDeXMMsbyBAXuUdiUJ1xkH1I88L8-gmKddLDVTgw5AuInKoWMf1bLWelzgvvshNYsUnDp-QtS8645A1I87TOAK2S-6pgXkUprzaQG1MK5g2v2LcLdG40"><h1 id="状态机-101">状态机 101</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GumballMachine</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> SOLD_OUT = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NO_QUARTER = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> HAS_QUARTER = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> SOLD = <span class="number">3</span>;  <span class="comment">// 四个状态</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> state = SOLD_OUT;       <span class="comment">// 当前状态</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;              <span class="comment">// 糖果数量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GumballMachine</span><span class="params">(<span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.count = count;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            state = NO_QUARTER;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertQuarter</span><span class="params">()</span> </span>&#123;  <span class="comment">// 投入25分钱</span></span><br><span class="line">        <span class="comment">// 利用条件语句决定在每个状态内什么行为是恰当的</span></span><br><span class="line">        <span class="keyword">if</span> (state == HAS_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">"You can't insert another quarter"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == NO_QUARTER) &#123;</span><br><span class="line">            state = HAS_QUARTER;</span><br><span class="line">            System.out.println(<span class="string">"You inserted a quarter"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD_OUT) &#123;</span><br><span class="line">            System.out.println(<span class="string">"You can't insert a quarter, the machine is sold out"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Please wait, we're already giving you a gumball"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ejectQuarter</span><span class="params">()</span> </span>&#123; <span class="comment">/* 退回25分钱 */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnCrank</span><span class="params">()</span> </span>&#123; <span class="comment">/* 转动曲柄 */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispense</span><span class="params">()</span> </span>&#123; <span class="comment">/* 发放糖果 */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="该来的躲不掉变更请求">该来的躲不掉：变更请求</h1><p>我们认为，将“购买糖果”变成是一个游戏，可以大大地增加我们的销售量。当曲柄被转动时，有 10% 的几率掉下来的是两颗糖果。当个赢家！10 人有 1 人可以得到免费糖果。</p><div class="post-button"> <a class="btn" href="/head-first-design-patterns/state-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/leetcode/validate-binary-search-tree/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/leetcode/validate-binary-search-tree/" class="post-title-link" itemprop="url">98. Validate Binary Search Tree</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-09 09:41:54" itemprop="dateModified" datetime="2020-08-09T09:41:54+08:00">2020-08-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span></span><span id="/leetcode/validate-binary-search-tree/" class="post-meta-item leancloud_visitors" data-flag-title="98. Validate Binary Search Tree" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>Given a binary tree, determine if it is a valid binary search tree (BST).</p><p>Assume a BST is defined as follows:</p><ul><li>The left subtree of a node contains only nodes with keys <strong>less than</strong> the node's key.</li><li>The right subtree of a node contains only nodes with keys <strong>greater than</strong> the node's key.</li><li>Both the left and right subtrees must also be binary search trees.</li></ul><p>Example 1:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">    2</span><br><span class="line">   / \</span><br><span class="line">  1   3</span><br><span class="line">Output: true</span><br></pre></td></tr></table></figure><p>Example 2:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input:</span><br><span class="line">    5</span><br><span class="line">   / \</span><br><span class="line">  1   4</span><br><span class="line">     / \</span><br><span class="line">    3   6</span><br><span class="line">Output: false</span><br></pre></td></tr></table></figure><h1 id="recursion">Recursion</h1><p>For each node <code>l</code> in left subtree, we check if <code>l.val &lt; root.val</code> or not; And for each node <code>r</code> in right subtree, we check <code>r.val &gt; root.val</code>. Then, same procedure applied on subtrees.</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Time: O(n)</span></span><br><span class="line"><span class="comment"># Space: O(n)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isValidBST</span><span class="params">(self, root: TreeNode)</span> -&gt; bool:</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(node, lower=float<span class="params">(<span class="string">'-inf'</span>)</span>, upper=float<span class="params">(<span class="string">'inf'</span>)</span>)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            val = node.val</span><br><span class="line">            <span class="keyword">if</span> val &gt;= upper <span class="keyword">or</span> val &lt;= lower:  <span class="comment"># check root and it's two children</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> helper(node.left, lower, val):  <span class="comment"># check left subtree recursively</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> helper(node.right, val, upper):  <span class="comment"># check right subtree recursively</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> helper(root)</span><br></pre></td></tr></table></figure><div class="post-button"> <a class="btn" href="/leetcode/validate-binary-search-tree/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/iterator-pattern-and-composite-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/iterator-pattern-and-composite-pattern/" class="post-title-link" itemprop="url">迭代器模式和组合模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:51" itemprop="dateModified" datetime="2020-08-22T15:34:51+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/iterator-pattern-and-composite-pattern/" class="post-meta-item leancloud_visitors" data-flag-title="迭代器模式和组合模式" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="迭代器模式封装遍历">迭代器模式：封装遍历</h1><h2 id="导入餐厅和煎饼屋合并了">导入：餐厅和煎饼屋合并了</h2> <img src="http://www.plantuml.com/plantuml/svg/TP31Im915CRl-rUyOnt4UqGGT2We23gAXt7dwGxjpiZiA8XuKoWoaqY3yY8KU0cA81IB_XbdL_-BTjSSK-dulddVz_lcEOmYe5TK5V3Gow6qd5YncRHTj6oN-3wS82yTAVIWQW6SASbu0JZnS3bHz6t9Yee97eavuRf8E9InW8f8HcAHYbBEHIXAPgDL-qq-9TmcvtWeIZx6b8ImBoMf73DVHOtcO3zIou9H89J6yzRsobf4MLJqawUgXyeHj0RfDEZ6nsJS3RgZuBrZk0UCepJ0XJcJJOZiF-AVlJLapJ8tsasbDhwr-chWrh96AXETdIBFxcsQkL08aXKS1I9lIkp0xAcjMmrzsmmRhTdpftwx2dgNuUDGjvlXGtrwqzFNdLb_jEPVZzy1OzUzmTmr6RvClhx3ku6-k9_s1_C45_D9W2bj6cpOWivhEAx_0000"><p>真是个好消息！现在我们可以在同一个地方，享用煎饼屋美味的煎饼早餐，和好吃的餐厅午餐了。但是，好像有一点小麻烦……有两种不同的菜单表现方式，这会带来什么问题？</p><p>假设你已经被合组的新公司雇佣。你的工作是要创建一个 Java 版本的女招待。</p> <img src="http://www.plantuml.com/plantuml/svg/ROxDIiD058NtUOfPrbNVGLmeABZIzNLwQuOcOvYPBAGKYWWsOaX1nRzG5RLGDt7XeehWotIcoSfNS6e8qkhkt7FFT-znMGC9-e7Q9pxwEoWST-PG9gY73lL0Ih8DJ0cqekqGiWcSGWjNzqA96yX34YmODhF2E8gVPQDIrWq4usgcQqkaJUfrOg9J7R_ee_SyINLyFXaVJwyFJPPCnjtY_erqAcPP8BIQ8ETWdJoNlBaO5O_zEM0zvDJzDwpZtc9u2tTHWM30_tOpKTUaaMqrVRqh7cxBdXNDv9f2_nUlSV2nUZWyC8Cqpvvis5nc9VxrSP9_dkcRWGe5sa7tXxftLLfDy2JQivrl"><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printMenu</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList breakfastItems = pancakeHouseMenu.getMenuItems();</span><br><span class="line">    MenuItem[] launchItems = dinerMenu.getMenuItems();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; breakfastItems.size(); i++) &#123;</span><br><span class="line">        MenuItem menuItem = (MenuItem)breakfastItems.get(i);</span><br><span class="line">        <span class="comment">// 打印menuItem</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; lunchItems.length; i++) &#123;</span><br><span class="line">        MenuItem menuItem = lunchItems[i];</span><br><span class="line">        <span class="comment">// 打印menuItem</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现其他方法，做法也类似。我们总是需要处理两个菜单，并且用两个循环遍历。如果还有第三家餐厅以不同的实现出现，我们就需要有三个循环。</p><div class="post-button"> <a class="btn" href="/head-first-design-patterns/iterator-pattern-and-composite-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/python/str-title-function/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/python/str-title-function/" class="post-title-link" itemprop="url">str.title 方法</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-29 10:39:52" itemprop="dateModified" datetime="2020-08-29T10:39:52+08:00">2020-08-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming-languages/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming-languages/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span></span><span id="/python/str-title-function/" class="post-meta-item leancloud_visitors" data-flag-title="str.title 方法" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p><a href="https://devdocs.io/python~3.6/library/stdtypes#str.title" target="_blank" rel="noopener"><code>str.title()</code></a></p></blockquote><p>Return a titlecased version of the string where words start with an uppercase character and the remaining characters are lowercase.</p><p>For example:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello world'</span>.title()</span><br><span class="line"><span class="string">'Hello World'</span></span><br></pre></td></tr></table></figure><p>The algorithm uses a simple language-independent definition of a word as groups of consecutive letters. The definition works in many contexts but it means that apostrophes in contractions and possessives form word boundaries, which may not be the desired result:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"they're bill's friends from the UK"</span>.title()</span><br><span class="line"><span class="string">"They'Re Bill'S Friends From The Uk"</span></span><br></pre></td></tr></table></figure><p>A workaround for apostrophes can be constructed using regular expressions:</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">titlecase</span><span class="params">(s)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> re.sub(<span class="string">r"[A-Za-z]+('[A-Za-z]+)?"</span>,</span><br><span class="line"><span class="meta">... </span>                  <span class="keyword">lambda</span> mo: mo.group(<span class="number">0</span>)[<span class="number">0</span>].upper() +</span><br><span class="line"><span class="meta">... </span>                             mo.group(<span class="number">0</span>)[<span class="number">1</span>:].lower(),</span><br><span class="line"><span class="meta">... </span>                  s)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>titlecase(<span class="string">"they're bill's friends."</span>)</span><br><span class="line"><span class="string">"They're Bill's Friends."</span></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/template-method-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/head-first-design-patterns/template-method-pattern/" class="post-title-link" itemprop="url">模板方法模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:50" itemprop="dateModified" datetime="2020-08-22T15:34:50+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/template-method-pattern/" class="post-meta-item leancloud_visitors" data-flag-title="模板方法模式" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入茶和咖啡">导入：茶和咖啡</h1><p>有些人没有咖啡就活不下去；有些人则离不开茶。两者共同的成分是什么？当然是咖啡因了！但还不只这样：茶和咖啡的冲泡方式非常相似。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">星巴兹咖啡冲泡法：</span><br><span class="line">1. 把水煮沸</span><br><span class="line">2. 用沸水冲泡咖啡</span><br><span class="line">3. 把咖啡倒进杯子</span><br><span class="line">4. 加糖和牛奶</span><br><span class="line"></span><br><span class="line">星巴兹茶冲泡法</span><br><span class="line">1. 把水煮沸</span><br><span class="line">2. 用沸水浸泡茶叶</span><br><span class="line">3. 把茶倒进杯子</span><br><span class="line">4. 加柠檬</span><br></pre></td></tr></table></figure><p>茶和咖啡的类：</p> <img src="http://www.plantuml.com/plantuml/svg/ZOqx3i8m40Lxdy8b70Ce418qW4IziLyI2tzMQri88UwEar1IKCvezDxeB3G2bwSE21r4ZPCnJeo7CfvorhlKzu1-AQrPm2GumpZ6QjrCbvo_KO4i97Wi-LvSj7cMdAeSegay4rbxgGF99jgJy_Vctj-VA-Ylarm0Rl6MXj_xHuGKf-4F"><p>茶和咖啡的类存在着重复的代码。你会如何重新设计这些类来删除重复代码？</p><div class="post-button"> <a class="btn" href="/head-first-design-patterns/template-method-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"> <a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a></nav></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="菜农陈文生" src="/uploads/avatar/nekosensei.png"><p class="site-author-name" itemprop="name">菜农陈文生</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">277</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">26</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">109</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/cncws" title="GitHub → https://github.com/cncws" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:1031616423@qq.com" title="E-Mail → mailto:1031616423@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">菜农陈文生</span></div><script src="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><script src="/js/aplayer-el.js"></script><script src="//unpkg.com/video.js/dist/video.min.js"></script><script src="/js/videojs-bilibili.js"></script><script src="/js/videojs-bilibili-el.js"></script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script src="/js/local-search.js"></script><div id="pjax"><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Axl15EIRi5o5AatKaxXxV4Oq-gzGzoHsz',
      appKey     : 'E0qm04UjsP0qQN1l8ME3GQ25',
      placeholder: "Just go go",
      avatar     : 'identicon',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></div></body></html>
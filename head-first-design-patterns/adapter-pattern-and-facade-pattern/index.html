<!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/uploads/icon/drop/128x128.png"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/icon/drop/32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/icon/drop/16x16.png"><link rel="mask-icon" href="/uploads/icon/drop/drop.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="NKt2iJb3Hnl6-Sm7LB-fTT7LRyi9cg5yZrB-zd0ohtk"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"cwscn.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1,width:240},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"manual"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"fadeIn"}},path:"search.xml"}</script><meta name="description" content="还记得装饰者模式吗？我们将对象包起来，赋予它们新的职责。而现在则是以不同目的，包装某些对象：让它们的接口看起来不像自己而像是别的东西。为何要这样做？因为这样就可以在设计中，将类的接口转换成想要的接口。不仅如此，我们还要探讨另一个模式，将对象包装起来以简化接口。 适配器模式：转换接口 我们周围的适配器 OO 适配器是什么，你一定不难理解，因为现实中到处都是。比方说：如果你需要在欧洲国家使用美国制造的"><meta name="keywords" content="blog"><meta property="og:type" content="article"><meta property="og:title" content="适配器模式与外观模式"><meta property="og:url" content="https://cwscn.github.io/head-first-design-patterns/adapter-pattern-and-facade-pattern/index.html"><meta property="og:site_name" content="春夏秋冬"><meta property="og:description" content="还记得装饰者模式吗？我们将对象包起来，赋予它们新的职责。而现在则是以不同目的，包装某些对象：让它们的接口看起来不像自己而像是别的东西。为何要这样做？因为这样就可以在设计中，将类的接口转换成想要的接口。不仅如此，我们还要探讨另一个模式，将对象包装起来以简化接口。 适配器模式：转换接口 我们周围的适配器 OO 适配器是什么，你一定不难理解，因为现实中到处都是。比方说：如果你需要在欧洲国家使用美国制造的"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfogub2PdAzZOm0Nix1IgkHGKgXEJYakA4fDBQXKAInEJipKqKGNJSYg1GhL81eMK5cMdLk8tAZq_AIad5PTPoJc9nSKAleavEOb5AM1tWRH3hLUeLj3NLtWwSIC8zQzMg0LAWJL295vEtV-oOShBnVDUBEm1oi4C2y_CIO4w36GMp7weOPFMWn2cOS_dhyLc6CGWnvJ40g07mUP1ZIu1KoXkXGZfmIoqHbW1D0uIvZLwUiYUvO8584WSuMwuObJhhHIUhfltl6_3i-RDB_QkUTQxw5d7X9YyvxDQdc_S_NHUzxE-fK_x5tEXkbZN3ce60000"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/AyaioKbLK7gwVkUBZGkLNZOqlMpjVJfp1LT6PaggGcfkGKcbGcvgRb9g4KGaERCeEIULApEl9BKeBJ4vLI4aiIWzjKJ1nWOkP6UdKCsbe52Tc5HSKfION5AhK9HQM9fQNAAXoLNBbPoJM5oiu9YIM52IcWfMM5oGcfoPbfaSX4DL4LWLJ4SYX0QAm4rLg8Q9wc6OPQrG2pGEviWQFJsOeLOASBy-NJVlUT-6vxFNFLlG_gnlwTF-nLmmctNjO1OZgN-oe-_5ejKGxek6rkUxMvvEw83ReQVWd9EPcbTYfV1qtQ9d7TkVzgzwFgVxQGUA1G00"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/AyaioKbLK7g-SRVIouQcbwszJsUkuCh8J4bLICqjAAbKo4tDJKejWeWaPnObvwHo9USa5XShX2GMfQUMA5HpAIWKfHQMfXQNQ6XorK8b7LCI2qfIKy6onGMfoPbfcSb1E5GLePc1NGVKEfiQNLsOFYwOBIY2pZcPgNab2dfsK1TovUMNf2eKPQPdb2Zafy6KMIa0VGptyFFTovzrxe_9Ux5eDKJiHKFhqqazpsUlUxQW7QWG0000"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/XP0zJiD048NxFSMKKE03XCWDSa41L1nWindBbhm_sXsJ86C98IZfQ2YeQDBGqY38POn2Ri4w3iOHAz6DthwPxxtDyYa2IaEN855EqBAiLKHkHO4iLuGsvGBXs0-Sj8Nnk1VZ62e6KF698yi5rP1nTufpsjlVbLL0ioZr1Ngr7b0ILSgMaslrB-X4MqmAbAZ8XO3Rjmr15DovuVM-JdjtI4K_Uwal0fLFIgNjNg8_t4EelLs5l3iXEjzFQU-apEgPNvp1kNAbCTeIJi_CDaSo5sZyq2tMxFVxhw8eL8I5oXt4G-lWI0H7HUvpZQ3vU5hTlZRlozN3uclvqhmzVpukcDA4K61AeDCGRGJhwvlrtRttVWC0"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/lL3BIiD05DtdAsQfYz2zY23r0mfkkucJ6n999aCI2wKKeY2s80sAbY8AWl6ni0iHn3RQVand4btv2qxIH-e3r8shU-wvTyuvTtH31GGMzQh80ci374bF6Mmus0G9cuhhebMBcePcW8Dg4a95jMGgLT7W2H3SMcLAgfMSNSSE045kLaHV4ngcMaU50kAx3ongyw3pkXU8YKqM5jEYQLbrmIkgKoIqCrYpmDFj-UTnknVV7qlrISnPi3HbdbcPegy-i0dOon1LjbmO8w7nEx_yw7yoBDaKsmuHXVx5bDhq9_rSHvPNPX_vYPxTEySlo_9twocThnFR0sI2veb87uzOGl5famyQF3n9xgAtf_qnBXFM3rd_K10lmuvOOOy-3w-JGLWcSUkI1nTYadIRoPaVDmvOT5icl1NnxXNhdO_yRVOyJ8vkHlxEEm00"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/nLJBJjjG4DtxA-woNIJi4QfK1LNTL48josnS-mQxEBRbkAbG52a425K5X0MDGaW9eZmgAl8GRGYuQJwcldwi-WiTlvF6aSgggpipP-RCcV7rvNWM8voLrJMKnTdNMA4u9yBm2YDWYX7eN0uzbx9ucSEqYfLdD4C3NA0GIh5B0hs65SJu1iGMyq6GpKVH9Kbc94M4GmP4TWy8lwDLXdiXvNdyw36uM6GZH-1pAXQNfHGROBuL02zfbfS2B72A52NJp2gzWX6vtZTlD5DhkLgzEPvcPO7FyA31YSLFC6i6X5un2iOYohc76oa0by0MqTmS8bjzNQkHQjtUhhgO9BhYmCXaV2k7LNy8ruO-lbF8OfMJnecCsfrnyn70OYW-5EjfZsQX0sjMN_m6Cwflo_JR70viu7k8WcWn_qt2v4rwi0ouUl_MBU9C99w4gvy25lDno48Y4L_Y0559aPh-hnpIC7y67bB7mr63U7nYXJ4v2qcK4dWigfHte6Joxo9HKZ4IS4Q5rKu_3lF86XtgWojoLhCkosPF8zqAQVV9_JKPzkp3qxHeDZQjpe2SDKnjKzVwrcL57zphWn8KfSNmn_tzOySkDQpHjjNTC0--f4MVTWmtFfsJzh6vrqsBuu-9zob_bSgUKeLVuLofta3pYBHFZVUtklRPF5adrOwkdNij9bLw-etgllxp21HxfD3KAkteWrqoseAKogvV6OWA4w5xG47k-aRpojd2NWiKGqgOdXRjkcOt3gplju103Rae6yTDVNXYDqlMnVhOEc2H3ldHD_jhdVJAv4FBsXY276SlTQFUyGRHXoD7pbGZeFu3"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYNd91ONApZdPARcbN11A0KzEmMtnEJ4b5Gk2AMWgskd45oQ55nPN9AQwuXLr0ckMGzPhPN2qsLDp-RDUJQdy-d-rXVB6j_lwNcwRj6pZkrFTiv_sh_-oUwbCNbFzkv_FcN5qxKJdc_U_Npt_EUpMfxrBNtQl_XnGnDNNdv9ga9HPdf6YK9-6jHPLWhF-YSysJVxsOp9JtRrGNG3DG6rFjdH0DSA0000"><meta property="og:image" content="http://www.plantuml.com/plantuml/svg/TLBBBWDH6DxFK_pflariHIHI4JiMbjsCSUZ4t3ATI4GaDQMcYh9m7qgrBerM1LMgF8pvpuoLLt16QIF6wkHyb__xpYKkJX0WicRCWapaSQ9pSHyHH5sG2AVnmZG_HG0h6-vjqstcOOu342G-aO1HLHDKNM6Bnbm00x8cYPCYqI4SxeVenAZ4pmOGWpD1J5yu76pnYQvbdXjMPJ8M9xn1z25Uu5bLVsX7_m_V6HrCTmE2-Tz7_QlfYq1K4ebYS8fg4D35gRW1wkGts0lUwvxJA6ErGAq7p9MfdN4QIOPGEukvxCVpQan1-s9an7tUTY-oJgF2eD1VOIYcqDrhfrd7KijvojBKKZkFIHbQygwttCEaLxtil9RpcFTIhVU5UwnQr4vYRTFDCraQr_DexRqbJPPxPj8Z6tEx-BA3nJ8Mr-YXoU9PzDTslntjPkvfFODBzNQvcF9kdZgF5hKsdUPLEnuBHxXoJ0_kcCdTNyJYjdVkJy9QcbQABEcd5LffQctWyh5_9pSclJfXJKB09q3fuPGUY4Iw_-qJ"><meta property="og:updated_time" content="2020-08-22T07:34:51.049Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="适配器模式与外观模式"><meta name="twitter:description" content="还记得装饰者模式吗？我们将对象包起来，赋予它们新的职责。而现在则是以不同目的，包装某些对象：让它们的接口看起来不像自己而像是别的东西。为何要这样做？因为这样就可以在设计中，将类的接口转换成想要的接口。不仅如此，我们还要探讨另一个模式，将对象包装起来以简化接口。 适配器模式：转换接口 我们周围的适配器 OO 适配器是什么，你一定不难理解，因为现实中到处都是。比方说：如果你需要在欧洲国家使用美国制造的"><meta name="twitter:image" content="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfogub2PdAzZOm0Nix1IgkHGKgXEJYakA4fDBQXKAInEJipKqKGNJSYg1GhL81eMK5cMdLk8tAZq_AIad5PTPoJc9nSKAleavEOb5AM1tWRH3hLUeLj3NLtWwSIC8zQzMg0LAWJL295vEtV-oOShBnVDUBEm1oi4C2y_CIO4w36GMp7weOPFMWn2cOS_dhyLc6CGWnvJ40g07mUP1ZIu1KoXkXGZfmIoqHbW1D0uIvZLwUiYUvO8584WSuMwuObJhhHIUhfltl6_3i-RDB_QkUTQxw5d7X9YyvxDQdc_S_NHUzxE-fK_x5tEXkbZN3ce60000"><link rel="canonical" href="https://cwscn.github.io/head-first-design-patterns/adapter-pattern-and-facade-pattern/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><link rel="stylesheet" href="//unpkg.com/video.js/dist/video-js.min.css"><link rel="stylesheet" href="/css/videojs-bilibili.css"><style>.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order{display:inline-block}</style><title>适配器模式与外观模式 | 春夏秋冬</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">春夏秋冬</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">愿你走出半生 归来仍是少年</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档<span class="badge">270</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类<span class="badge">26</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签<span class="badge">109</span></a></li><li class="menu-item menu-item-收藏"><a href="/favlist/" rel="section"><i class="fa fa-star fa-fw"></i> 收藏</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><meting-js server="netease" type="playlist" id="67155774" theme="#ff5555" loop="all" order="list" preload="none" volume="" mutex="" list-folded="NaN" fixed="true"></meting-js></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/head-first-design-patterns/adapter-pattern-and-facade-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="春夏秋冬"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 适配器模式与外观模式</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-08-22 15:34:51" itemprop="dateModified" datetime="2020-08-22T15:34:51+08:00">2020-08-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/" itemprop="url" rel="index"><span itemprop="name">书籍</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/books/head-first-design-patterns/" itemprop="url" rel="index"><span itemprop="name">Head First 设计模式</span></a></span></span><span id="/head-first-design-patterns/adapter-pattern-and-facade-pattern/" class="post-meta-item leancloud_visitors" data-flag-title="适配器模式与外观模式" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/head-first-design-patterns/adapter-pattern-and-facade-pattern/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/head-first-design-patterns/adapter-pattern-and-facade-pattern/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>还记得装饰者模式吗？我们将对象包起来，赋予它们新的职责。而现在则是以不同目的，包装某些对象：让它们的接口看起来不像自己而像是别的东西。为何要这样做？因为这样就可以在设计中，将类的接口转换成想要的接口。不仅如此，我们还要探讨另一个模式，将对象包装起来以简化接口。</p><h1 id="适配器模式转换接口">适配器模式：转换接口</h1><h2 id="我们周围的适配器">我们周围的适配器</h2><p>OO 适配器是什么，你一定不难理解，因为现实中到处都是。比方说：如果你需要在欧洲国家使用美国制造的笔记本电脑，你可能需要使用一个交流电的适配器。它位于美式插头和欧式插座的中间，它的工作是将欧式插座转换成美式插座，好让美式插头可以插进这个插座得到电力。</p><p>某些交流电适配器相当简单，它们只是改变插座的形状来匹配你的插头，直接把电流传送过去。但是有些适配器内部则是相当复杂，可能会改变电流以符合装置的需求。</p><h2 id="导入街头顽禽">导入：“街头顽禽”</h2><p>如果它走起路来像只鸭子，叫起来像只鸭子，那么它可能是一只包装了鸭子适配器的火鸡。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfogub2PdAzZOm0Nix1IgkHGKgXEJYakA4fDBQXKAInEJipKqKGNJSYg1GhL81eMK5cMdLk8tAZq_AIad5PTPoJc9nSKAleavEOb5AM1tWRH3hLUeLj3NLtWwSIC8zQzMg0LAWJL295vEtV-oOShBnVDUBEm1oi4C2y_CIO4w36GMp7weOPFMWn2cOS_dhyLc6CGWnvJ40g07mUP1ZIu1KoXkXGZfmIoqHbW1D0uIvZLwUiYUvO8584WSuMwuObJhhHIUhfltl6_3i-RDB_QkUTQxw5d7X9YyvxDQdc_S_NHUzxE-fK_x5tEXkbZN3ce60000"><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurkeyAdapter</span> <span class="keyword">implements</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line">    Turkey turkey;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TurkeyAdapter</span><span class="params">(Turkey turkey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.turkey = turkey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        turkey.gobble();  <span class="comment">// 完成转换</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;  <span class="comment">// 火鸡的飞行距离短，多调用几次</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            turkey.fly();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="问答">问答</h2><ul><li><p><strong>问</strong>：一个适配器需要做多少“适配”的工作？如果我需要实现一个很大的目标接口，似乎有“很多”工作要做。</p><p><strong>答</strong>：的确是如此。实现一个适配器所需要进行的工作，的确和目标接口的大小成正比。如果不用适配器，你就必须改写客户端的代码来调用这个新的接口，将会花许多力气来做大量的调查工作和代码改写工作。相比之下，提供一个适配器类，将所有的改变封装在一个类中，是比较好的做法。</p></li><li><p><strong>问</strong>：一个适配器只能封装一个类吗？</p><p><strong>答</strong>：虽然大多数的适配器模式所采取的例子都是让一个适配器包装一个被适配者，但我们都知道这个世界其实复杂多了，所以你可能遇到一些状况，需要让一个适配器包装多个被适配着。</p><p>这涉及另一个模式，被称为外观模式（Facade Pattern），人们常常将外观模式和适配器模式混为一谈。</p></li></ul><h2 id="定义适配器模式">定义适配器模式</h2><p>适配器模式将一个类的接口，转换成客户期望的另一个接口。适配器让那个原本接口不兼容的类可以合作无间。</p><p>通过创建适配器进行接口转换，让不兼容的接口变成兼容。这可以让客户从实现的接口解耦。如果在一段时间之后，我们<strong>想要改变接口</strong>，适配器可以将改变的部分封装起来，客户就不必为了应对不同的接口而每次跟着修改。</p> <img src="http://www.plantuml.com/plantuml/svg/AyaioKbLK7gwVkUBZGkLNZOqlMpjVJfp1LT6PaggGcfkGKcbGcvgRb9g4KGaERCeEIULApEl9BKeBJ4vLI4aiIWzjKJ1nWOkP6UdKCsbe52Tc5HSKfION5AhK9HQM9fQNAAXoLNBbPoJM5oiu9YIM52IcWfMM5oGcfoPbfaSX4DL4LWLJ4SYX0QAm4rLg8Q9wc6OPQrG2pGEviWQFJsOeLOASBy-NJVlUT-6vxFNFLlG_gnlwTF-nLmmctNjO1OZgN-oe-_5ejKGxek6rkUxMvvEw83ReQVWd9EPcbTYfV1qtQ9d7TkVzgzwFgVxQGUA1G00"><p>这个适配器模式充满着良好的 OO 设计原则：使用对象组合，以修改的接口包装被适配者。这种做法还有额外的优点，那就是，被适配者的任何子类，都可以搭配适配者使用。</p><h2 id="对象和类的适配器">对象和类的适配器</h2><p>实际上有“两种”适配器：“对象”适配器和“类”适配器。“类”适配器需要多重继承才能够实现它，这在 Java 中是不可能的。但是当你在使用多重继承语言的时候，还是可能遇到这样的需求。</p> <img src="http://www.plantuml.com/plantuml/svg/AyaioKbLK7g-SRVIouQcbwszJsUkuCh8J4bLICqjAAbKo4tDJKejWeWaPnObvwHo9USa5XShX2GMfQUMA5HpAIWKfHQMfXQNQ6XorK8b7LCI2qfIKy6onGMfoPbfcSb1E5GLePc1NGVKEfiQNLsOFYwOBIY2pZcPgNab2dfsK1TovUMNf2eKPQPdb2Zafy6KMIa0VGptyFFTovzrxe_9Ux5eDKJiHKFhqqazpsUlUxQW7QWG0000"><h2 id="真实世界的适配器">真实世界的适配器</h2><p>早期的 Java 集合（collection）类型（例如：Vecotr、Stack、Hashtable）都实现了一个名为 <code>elements()</code> 的方法。该方法会返回一个 Enumeration（举）。这个 Enumeration 接口可以逐一走过此集合内的每个元素，而无需知道它们在集合内是如何被管理的。</p><p>当 Sun 推出更新后的集合类时，开始使用了 Iterator（迭代器）接口，这个接口和枚举接口很像，都可以让你遍历此集合内的每个元素，但不同的是，迭代器还提供了删除元素的能力。</p><p>而今天……我们经常面对遗留代码，这些代码暴露出枚举接口，但我们又希望在新的代码中只是用迭代器。想解决这个问题，看来我们需要构造一个适配器。</p> <img src="http://www.plantuml.com/plantuml/svg/XP0zJiD048NxFSMKKE03XCWDSa41L1nWindBbhm_sXsJ86C98IZfQ2YeQDBGqY38POn2Ri4w3iOHAz6DthwPxxtDyYa2IaEN855EqBAiLKHkHO4iLuGsvGBXs0-Sj8Nnk1VZ62e6KF698yi5rP1nTufpsjlVbLL0ioZr1Ngr7b0ILSgMaslrB-X4MqmAbAZ8XO3Rjmr15DovuVM-JdjtI4K_Uwal0fLFIgNjNg8_t4EelLs5l3iXEjzFQU-apEgPNvp1kNAbCTeIJi_CDaSo5sZyq2tMxFVxhw8eL8I5oXt4G-lWI0H7HUvpZQ3vU5hTlZRlozN3uclvqhmzVpukcDA4K61AeDCGRGJhwvlrtRttVWC0"><p>在这个例子中，适配器并不完美：客户必须小心潜在的异常（不支持 <code>remove()</code> 方法），但只要客户够小心，而且适配器的文档能做出说明，这也算是一个合理的解决方案。</p><h2 id="适配器装饰者外观">适配器、装饰者、外观</h2><p>某些交流电适配器所做的事情不只是改变接口，它们还加了一些其他的特性，例如：电涌保护、指示灯、警报声等。如果要你实现这类特性，你要使用什么模式？（装饰者模式）</p><table><thead><tr class="header"><th>模式</th><th>意图</th></tr></thead><tbody><tr class="odd"><td>装饰者</td><td>不改变接口，但加入新的责任</td></tr><tr class="even"><td>适配器</td><td>将一个接口转成另一个接口</td></tr><tr class="odd"><td>外观</td><td>让接口更简单</td></tr></tbody></table><h1 id="外观模式简化接口">外观模式：简化接口</h1><h2 id="导入甜蜜的家庭影院">导入：甜蜜的家庭影院</h2><p>一个热潮风行全美：建立自己的家庭影院。通过一番研究比较，你组装了一套杀手级的系统，内含 DVD 播放器、投影机、自动屏幕、环绕立体声，甚至还有爆米花机。</p> <img src="http://www.plantuml.com/plantuml/svg/lL3BIiD05DtdAsQfYz2zY23r0mfkkucJ6n999aCI2wKKeY2s80sAbY8AWl6ni0iHn3RQVand4btv2qxIH-e3r8shU-wvTyuvTtH31GGMzQh80ci374bF6Mmus0G9cuhhebMBcePcW8Dg4a95jMGgLT7W2H3SMcLAgfMSNSSE045kLaHV4ngcMaU50kAx3ongyw3pkXU8YKqM5jEYQLbrmIkgKoIqCrYpmDFj-UTnknVV7qlrISnPi3HbdbcPegy-i0dOon1LjbmO8w7nEx_yw7yoBDaKsmuHXVx5bDhq9_rSHvPNPX_vYPxTEySlo_9twocThnFR0sI2veb87uzOGl5famyQF3n9xgAtf_qnBXFM3rd_K10lmuvOOOy-3w-JGLWcSUkI1nTYadIRoPaVDmvOT5icl1NnxXNhdO_yRVOyJ8vkHlxEEm00"><p>现在，你准备开始享受一部电影……想看电影，必须先执行一些任务。</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">popper.on();</span><br><span class="line">popper.pop();  <span class="comment">// 打开爆米花机，开始爆米花</span></span><br><span class="line"></span><br><span class="line">lights.dim(<span class="number">10</span>);  <span class="comment">// 调暗灯光</span></span><br><span class="line"></span><br><span class="line">screen.down();  <span class="comment">// 降下屏幕</span></span><br><span class="line"></span><br><span class="line">projector.on();</span><br><span class="line">projector.setInput(dvd);</span><br><span class="line">projector.wideScreenMode();  <span class="comment">// 打开并设置投影仪</span></span><br><span class="line"></span><br><span class="line">amp.on();</span><br><span class="line">amp.setDvd();</span><br><span class="line">amp.setSurroundSound();</span><br><span class="line">amp.setVolume(<span class="number">5</span>);  <span class="comment">// 打开并设置功放</span></span><br><span class="line"></span><br><span class="line">dvd.on();</span><br><span class="line">dvd.play(movie);  <span class="comment">// 打开DVD播放机，可以看电影了</span></span><br></pre></td></tr></table></figure><p>还不止是这样……</p><ul><li>看完电影后，还要把一切都关掉。</li><li>如果要听 CD 或者广播，难道也会这么麻烦？</li><li>如果你决定升级你的系统，可能还必须重新学习一套稍微不同的操作过程。</li></ul><h2 id="使用外观模式">使用外观模式</h2> <img src="http://www.plantuml.com/plantuml/svg/nLJBJjjG4DtxA-woNIJi4QfK1LNTL48josnS-mQxEBRbkAbG52a425K5X0MDGaW9eZmgAl8GRGYuQJwcldwi-WiTlvF6aSgggpipP-RCcV7rvNWM8voLrJMKnTdNMA4u9yBm2YDWYX7eN0uzbx9ucSEqYfLdD4C3NA0GIh5B0hs65SJu1iGMyq6GpKVH9Kbc94M4GmP4TWy8lwDLXdiXvNdyw36uM6GZH-1pAXQNfHGROBuL02zfbfS2B72A52NJp2gzWX6vtZTlD5DhkLgzEPvcPO7FyA31YSLFC6i6X5un2iOYohc76oa0by0MqTmS8bjzNQkHQjtUhhgO9BhYmCXaV2k7LNy8ruO-lbF8OfMJnecCsfrnyn70OYW-5EjfZsQX0sjMN_m6Cwflo_JR70viu7k8WcWn_qt2v4rwi0ouUl_MBU9C99w4gvy25lDno48Y4L_Y0559aPh-hnpIC7y67bB7mr63U7nYXJ4v2qcK4dWigfHte6Joxo9HKZ4IS4Q5rKu_3lF86XtgWojoLhCkosPF8zqAQVV9_JKPzkp3qxHeDZQjpe2SDKnjKzVwrcL57zphWn8KfSNmn_tzOySkDQpHjjNTC0--f4MVTWmtFfsJzh6vrqsBuu-9zob_bSgUKeLVuLofta3pYBHFZVUtklRPF5adrOwkdNij9bLw-etgllxp21HxfD3KAkteWrqoseAKogvV6OWA4w5xG47k-aRpojd2NWiKGqgOdXRjkcOt3gplju103Rae6yTDVNXYDqlMnVhOEc2H3ldHD_jhdVJAv4FBsXY276SlTQFUyGRHXoD7pbGZeFu3"><h2 id="问答-1">问答</h2><ul><li><p><strong>问</strong>：如果外观封装了子系统的类，那么需要低层功能的客户如何接触这些类？</p><p><strong>答</strong>：<strong>外观没有“封装”子系统的类，外观只提供简化的接口</strong>，所以客户如果觉得有必要，依然可以直接使用子系统的类。这是外观模式一个很好的特征：提供简化的接口的同时，依然将系统完整的功能暴露出来，以供需要的人使用。</p></li><li><p><strong>问</strong>：外观会新增功能吗，或者它只是将每一个请求转由子系统执行？</p><p><strong>答</strong>：外观可以附加“聪明的”功能，让使用子系统更方便。</p></li><li><p><strong>问</strong>：除了能提供一个比较简单的接口之外，外观模式还有其他的优点吗？</p><p><strong>答</strong>：<strong>外观不只是简化了接口，也将客户从组件的子系统中解耦</strong>。比方说，你想要升级你的家庭影院，采用全新的和以前不一样接口的组件，现在你不需要改变客户代码（依旧是 <code>homeTheater.watchMovie()</code>），只需要修改外观代码（而且有可能厂商会提供新版的外观代码）。</p></li><li><p><strong>问</strong>：我可不可以这样说，适配器模式和外观模式之间的差异在于：适配器包装一个类，而外观可以代表许多类？</p><p><strong>答</strong>：不对！适配器将一个或多个接口变成客户所期望的一个接口。虽然大多数例子中适配器只适配一个类，但是你可以适配许多类。类似地，一个外观也可以只针对一个拥有复杂接口的类提供简化的接口。</p><p><strong>两种模式的差异，不在于它们“包装”了几个类，而是在于它们的意图。适配器模式的意图是，“改变”接口符合客户的期望；而外观模式的意图是，提供子系统的一个简化接口。</strong></p></li></ul><h2 id="定义外观模式">定义外观模式</h2><p>外观模式提供了一个统一的接口，用来访问子系统中的一群接口。外观定义了一个高层接口，让子系统更容易使用。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYNd91ONApZdPARcbN11A0KzEmMtnEJ4b5Gk2AMWgskd45oQ55nPN9AQwuXLr0ckMGzPhPN2qsLDp-RDUJQdy-d-rXVB6j_lwNcwRj6pZkrFTiv_sh_-oUwbCNbFzkv_FcN5qxKJdc_U_Npt_EUpMfxrBNtQl_XnGnDNNdv9ga9HPdf6YK9-6jHPLWhF-YSysJVxsOp9JtRrGNG3DG6rFjdH0DSA0000"><h1 id="最少知识原则">最少知识原则</h1><p>只和你的密友谈话。</p><p>当你正在设计一个系统，不管是任何对象，你都要注意它所交互的类有哪些，并注意它和这些类是如何交互的。</p><p>这个原则希望我们在设计中，不要让太多的类耦合在一起，免得修改系统中一部分，会影响到其他部分。如果许多类之间相互依赖，那么这个系统就会变成一个易碎的系统，它需要花许多成本维护，也会因为太复杂而不容易被其他人了解。</p><p>究竟要怎样才能避免这样呢？这个原则提供了一些方针：就任何对象而言，在该对象的方法内，我们只因该调用属于以下范围的方法：</p><ul><li>该对象本身</li><li>被当做方法的参数而传递进来的对象</li><li>此方法所创建或实例化的任何对象</li><li>对象的任何组件</li></ul><p>这些方针告诉我们，如果某对象是调用其他的方法的返回结果，不要调用该对象的方法。这听起来有点严厉，不是吗？如果调用从另一个调用中返回的对象的方法，会有什么害处呢？<strong>如果我们这样做，相当于向另一个对象的子部分发请求（而增加我们直接认识的对象数目）</strong>。在这种情况下，原则要我们改为要求该对象为我们做出请求，这么一来，我们就不需要认识该对象的组件了（让我们的朋友圈子维持在最小的状态）。比方说：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Thermometer thermometer = station.getThermometer();  <span class="comment">// 取得温度计</span></span><br><span class="line">    <span class="keyword">return</span> thermometer.getTemperature();  <span class="comment">// 从温度计对象取得温度</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 采用最少知识原则</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> station.getTemperature();  <span class="comment">// 在气象站中加进一个方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>问</strong>：还有另一个原则，叫做得墨忒耳法则（Law of Demeter），它和最少知识原则有什么关系？</p><p><strong>答</strong>：其实两个名次指的是同一个原则。我们倾向于使用最少知识原则来称呼它是因为以下两个原因：（1）这个名字更直接。（2）法则（Law）给人的感觉是强制的。事实上，没有任何原则是法律，<strong>所有的原则都应该在有帮助的时候才遵守。所有的设计都不免需要折衷（在抽象和速度之间取舍，在空间和时间之间平衡……）</strong>。虽然原则提供了方针，但在采用原则之前，必须全盘考虑所有的因素。</p></li><li><p><strong>问</strong>：采用最少知识原则有什么缺点吗？</p><p><strong>答</strong>：是的，虽然这个原则减少了对象之间的依赖，研究显示这会减少软件的维护成本；但是<strong>采用这个原则也会导致更多的“包装”类被制造出来，以处理和其他组件的沟通，这可能会导致复杂度和开发时间的增加，并降低运行时的性能</strong>。</p></li></ul><h1 id="外观和最少知识原则">外观和最少知识原则</h1> <img src="http://www.plantuml.com/plantuml/svg/TLBBBWDH6DxFK_pflariHIHI4JiMbjsCSUZ4t3ATI4GaDQMcYh9m7qgrBerM1LMgF8pvpuoLLt16QIF6wkHyb__xpYKkJX0WicRCWapaSQ9pSHyHH5sG2AVnmZG_HG0h6-vjqstcOOu342G-aO1HLHDKNM6Bnbm00x8cYPCYqI4SxeVenAZ4pmOGWpD1J5yu76pnYQvbdXjMPJ8M9xn1z25Uu5bLVsX7_m_V6HrCTmE2-Tz7_QlfYq1K4ebYS8fg4D35gRW1wkGts0lUwvxJA6ErGAq7p9MfdN4QIOPGEukvxCVpQan1-s9an7tUTY-oJgF2eD1VOIYcqDrhfrd7KijvojBKKZkFIHbQygwttCEaLxtil9RpcFTIhVU5UwnQr4vYRTFDCraQr_DexRqbJPPxPj8Z6tEx-BA3nJ8Mr-YXoU9PzDTslntjPkvfFODBzNQvcF9kdZgF5hKsdUPLEnuBHxXoJ0_kcCdTNyJYjdVkJy9QcbQABEcd5LffQctWyh5_9pSclJfXJKB09q3fuPGUY4Iw_-qJ"><h1 id="要点">要点</h1><ul><li>当需要使用一个现有的类而其接口并不符合你的需求时，就是用适配器。</li><li>当需要简化并统一一个很大的接口或者一群复杂的接口时，使用外观。</li><li>适配器将一个对象包装起来以改变其接口；装饰者将一个对象包装起来以增加新的行为和责任：而外观将一群对象“包装”起来以简化其接口。</li><li>实现一个适配器可能需要一番功夫，也可能不费工夫，视目标接口的大小和复杂度而定。</li><li>实现一个外观，需要将子系统组合进外观中，然后将工作委托给子系统执行。</li><li>适配器模式有两种形式：对象适配器和类适配器。类适配器需要用到多重继承。</li><li>你可以为一个子系统实现一个以上的外观。</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/head-first-design-patterns/command-pattern/" rel="prev" title="命令模式"><i class="fa fa-chevron-left"></i> 命令模式</a></div><div class="post-nav-item"> <a href="/head-first-design-patterns/template-method-pattern/" rel="next" title="模板方法模式">模板方法模式<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#适配器模式转换接口"><span class="nav-number">1.</span> <span class="nav-text">适配器模式：转换接口</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#我们周围的适配器"><span class="nav-number">1.1.</span> <span class="nav-text">我们周围的适配器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导入街头顽禽"><span class="nav-number">1.2.</span> <span class="nav-text">导入：“街头顽禽”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答"><span class="nav-number">1.3.</span> <span class="nav-text">问答</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定义适配器模式"><span class="nav-number">1.4.</span> <span class="nav-text">定义适配器模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象和类的适配器"><span class="nav-number">1.5.</span> <span class="nav-text">对象和类的适配器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#真实世界的适配器"><span class="nav-number">1.6.</span> <span class="nav-text">真实世界的适配器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#适配器装饰者外观"><span class="nav-number">1.7.</span> <span class="nav-text">适配器、装饰者、外观</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#外观模式简化接口"><span class="nav-number">2.</span> <span class="nav-text">外观模式：简化接口</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#导入甜蜜的家庭影院"><span class="nav-number">2.1.</span> <span class="nav-text">导入：甜蜜的家庭影院</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用外观模式"><span class="nav-number">2.2.</span> <span class="nav-text">使用外观模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问答-1"><span class="nav-number">2.3.</span> <span class="nav-text">问答</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#定义外观模式"><span class="nav-number">2.4.</span> <span class="nav-text">定义外观模式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#最少知识原则"><span class="nav-number">3.</span> <span class="nav-text">最少知识原则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#外观和最少知识原则"><span class="nav-number">4.</span> <span class="nav-text">外观和最少知识原则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#要点"><span class="nav-number">5.</span> <span class="nav-text">要点</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="菜农陈文生" src="/uploads/avatar/nekosensei.png"><p class="site-author-name" itemprop="name">菜农陈文生</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">270</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">26</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">109</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/cncws" title="GitHub → https://github.com/cncws" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:1031616423@qq.com" title="E-Mail → mailto:1031616423@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">菜农陈文生</span></div><script src="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><script src="/js/aplayer-el.js"></script><script src="//unpkg.com/video.js/dist/video.min.js"></script><script src="/js/videojs-bilibili.js"></script><script src="/js/videojs-bilibili-el.js"></script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script src="/js/local-search.js"></script><div id="pjax"><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Axl15EIRi5o5AatKaxXxV4Oq-gzGzoHsz',
      appKey     : 'E0qm04UjsP0qQN1l8ME3GQ25',
      placeholder: "Just go go",
      avatar     : 'identicon',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></div></body></html>
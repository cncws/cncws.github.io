var Button=videojs.getComponent("Button"),PrevButton=videojs.extend(Button,{constructor:function(){Button.apply(this,arguments),this.addClass("vjs-prev"),this.controlText("Previous")},handleClick:function(){this.player().playlist.previous(),this.player().play()}}),NextButton=videojs.extend(Button,{constructor:function(){Button.apply(this,arguments),this.addClass("vjs-next"),this.controlText("Next")},handleClick:function(){this.player().playlist.next(),this.player().play()}});videojs.registerComponent("NextButton",NextButton),videojs.registerComponent("PrevButton",PrevButton);var dom=videojs.dom||videojs,Component=videojs.getComponent("Component"),PlaylistMenuItem=videojs.extend(Component,{constructor:function(t,e,i){Component.call(this,t,e),this.item=e.item,this.playOnSelect=i.playOnSelect,this.emitTapEvents(),this.on(["click","tap"],this.switchPlaylistItem_)},togglePlay:function(){this.player_.paused()?this.player_.play():this.player_.pause()},switchPlaylistItem_:function(t){this.player_.playlist.currentItem()===this.item.playlistItemId_-1?this.togglePlay():(this.player_.playlist.currentItem(this.item.playlistItemId_-1),this.playOnSelect&&this.player_.play())},createEl:function(){var t=document.createElement("li");t.className="vjs-playlist-item";var e=this.options_.item,i=document.createElement("span");i.className="vjs-playlist-current",t.appendChild(i);var s=document.createElement("span");s.className="vjs-playlist-index",s.appendChild(document.createTextNode(e.playlistItemId_)),t.appendChild(s);var l=document.createElement("span");if(l.className="vjs-playlist-name",nameText=e.author+" - "+e.title||this.localize("Untitled Video"),l.appendChild(document.createTextNode(nameText)),t.appendChild(l),e.duration){var n=document.createElement("time");n.className="vjs-playlist-duration";var a=e.duration;-1==String(a).indexOf(":")&&(a=videojs.formatTime(a)),n.appendChild(document.createTextNode(a)),t.appendChild(n)}return t}}),PlaylistMenu=videojs.extend(Component,{constructor:function(t,e){Component.call(this,t,e),this.items=[],this.init_(),this.on(t,["loadstart","playlistchange","playlistsorted"],t=>{this.update()}),this.on("dispose",()=>{this.empty_(),t.playlistMenu=null}),this.on(t,"dispose",()=>{this.dispose()})},createEl:function(){return dom.createEl("div",{className:this.options_.className})},init_:function(){var t=this.player_.playlist()||[],e=document.createElement("ol");e.className="vjs-playlist-list",this.el_.appendChild(e),this.empty_();for(let s=0;s<t.length;s++){var i=new PlaylistMenuItem(this.player_,{item:t[s]},this.options_);this.items.push(i),e.appendChild(i.el_)}if(this.items.length&&s>=0){var s=this.player_.playlist.currentItem();this.addSelectedClass_(this.items[s])}},empty_:function(){this.items&&this.items.length&&(this.items.forEach(t=>t.dispose()),this.items.length=0)},addSelectedClass_:function(t){t.addClass("vjs-selected")},removeSelectedClass_:function(t){t.removeClass("vjs-selected")},update:function(){var t=this.player_.playlist();if(this.items.length===t.length){for(let e=0;e<this.items.length;e++)if(this.items[e].item!==t[e])return void this.init_();var e=this.player_.playlist.currentItem();for(let t=0;t<this.items.length;t++){var i=this.items[t];t===e?this.addSelectedClass_(i):this.removeSelectedClass_(i)}}else this.init_()}}),playlistUi=function(t){if(!this.playlist)throw new Error("videojs-playlist plugin is required by the videojs-playlist-ui plugin");t=videojs.mergeOptions({className:"vjs-playlist",playOnSelect:!0},t),dom.isEl(t.el)||(t.el=document.querySelector("."+t.className)),this.playlistMenu=new PlaylistMenu(this,t)};videojs.registerComponent("PlaylistMenu",PlaylistMenu),videojs.registerComponent("PlaylistMenuItem",PlaylistMenuItem),videojs.registerPlugin("playlistUi",playlistUi);
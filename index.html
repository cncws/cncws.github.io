<!DOCTYPE html><html lang="zh-CN,en,default"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 3.9.0"><link rel="apple-touch-icon" sizes="180x180" href="/uploads/icon/drop/128x128.png"><link rel="icon" type="image/png" sizes="32x32" href="/uploads/icon/drop/32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/uploads/icon/drop/16x16.png"><link rel="mask-icon" href="/uploads/icon/drop/drop.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"cwscn.github.io",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1,width:240},copycode:{enable:!0,show_result:!0,style:"flat"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"manual"},fancybox:!1,mediumzoom:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"fadeIn"}},path:"search.xml"}</script><meta name="keywords" content="blog"><meta property="og:type" content="website"><meta property="og:title" content="水滴"><meta property="og:url" content="https://cwscn.github.io/index.html"><meta property="og:site_name" content="水滴"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="水滴"><link rel="canonical" href="https://cwscn.github.io/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><link rel="stylesheet" href="//unpkg.com/video.js/dist/video-js.min.css"><link rel="stylesheet" href="/css/videojs-bilibili.css"><style>.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order{display:inline-block}</style><title>水滴</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">水滴</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">愿你走出半生 归来仍是少年</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档<span class="badge">124</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类<span class="badge">11</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签<span class="badge">129</span></a></li><li class="menu-item menu-item-收藏"><a href="/favlist/" rel="section"><i class="fa fa-star fa-fw"></i> 收藏</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div><meting-js server="netease" type="playlist" id="67155774" theme="#ffafc9" loop="all" order="list" preload="none" volume="" list-folded="NaN" fixed="true"></meting-js></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/template-method-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/template-method-pattern/" class="post-title-link" itemprop="url">模板方法模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-10 18:29:29" itemprop="dateModified" datetime="2020-06-10T18:29:29+08:00">2020-06-10</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入茶和咖啡">导入：茶和咖啡</h1><p>有些人没有咖啡就活不下去；有些人则离不开茶。两者共同的成分是什么？当然是咖啡因了！但还不只这样：茶和咖啡的冲泡方式非常相似。</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">星巴兹咖啡冲泡法：</span><br><span class="line">1. 把水煮沸</span><br><span class="line">2. 用沸水冲泡咖啡</span><br><span class="line">3. 把咖啡倒进杯子</span><br><span class="line">4. 加糖和牛奶</span><br><span class="line"></span><br><span class="line">星巴兹茶冲泡法</span><br><span class="line">1. 把水煮沸</span><br><span class="line">2. 用沸水浸泡茶叶</span><br><span class="line">3. 把茶倒进杯子</span><br><span class="line">4. 加柠檬</span><br></pre></td></tr></table></figure><p>茶和咖啡的类：</p> <img src="http://www.plantuml.com/plantuml/svg/ZOqx3i8m40Lxdy8b70Ce418qW4IziLyI2tzMQri88UwEar1IKCvezDxeB3G2bwSE21r4ZPCnJeo7CfvorhlKzu1-AQrPm2GumpZ6QjrCbvo_KO4i97Wi-LvSj7cMdAeSegay4rbxgGF99jgJy_Vctj-VA-Ylarm0Rl6MXj_xHuGKf-4F"><p>茶和咖啡的类存在着重复的代码。你会如何重新设计这些类来删除重复代码？</p><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/template-method-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/adapter-pattern-and-facade-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/adapter-pattern-and-facade-pattern/" class="post-title-link" itemprop="url">适配器模式与外观模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-10 15:16:00" itemprop="dateModified" datetime="2020-06-10T15:16:00+08:00">2020-06-10</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>还记得装饰者模式吗？我们将对象包起来，赋予它们新的职责。而现在则是以不同目的，包装某些对象：让它们的接口看起来不像自己而像是别的东西。为何要这样做？因为这样就可以在设计中，将类的接口转换成想要的接口。不仅如此，我们还要探讨另一个模式，将对象包装起来以简化接口。</p><h1 id="适配器模式转换接口">适配器模式：转换接口</h1><h2 id="我们周围的适配器">我们周围的适配器</h2><p>OO 适配器是什么，你一定不难理解，因为现实中到处都是。比方说：如果你需要在欧洲国家使用美国制造的笔记本电脑，你可能需要使用一个交流电的适配器。它位于美式插头和欧式插座的中间，它的工作是将欧式插座转换成美式插座，好让美式插头可以插进这个插座得到电力。</p><p>某些交流电适配器相当简单，它们只是改变插座的形状来匹配你的插头，直接把电流传送过去。但是有些适配器内部则是相当复杂，可能会改变电流以符合装置的需求。</p><h2 id="导入街头顽禽">导入：“街头顽禽”</h2><p>如果它走起路来像只鸭子，叫起来像只鸭子，那么它可能是一只包装了鸭子适配器的火鸡。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaScNcbQGMfIKcfogub2PdAzZOm0Nix1IgkHGKgXEJYakA4fDBQXKAInEJipKqKGNJSYg1GhL81eMK5cMdLk8tAZq_AIad5PTPoJc9nSKAleavEOb5AM1tWRH3hLUeLj3NLtWwSIC8zQzMg0LAWJL295vEtV-oOShBnVDUBEm1oi4C2y_CIO4w36GMp7weOPFMWn2cOS_dhyLc6CGWnvJ40g07mUP1ZIu1KoXkXGZfmIoqHbW1D0uIvZLwUiYUvO8584WSuMwuObJhhHIUhfltl6_3i-RDB_QkUTQxw5d7X9YyvxDQdc_S_NHUzxE-fK_x5tEXkbZN3ce60000"><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurkeyAdapter</span> <span class="keyword">implements</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line">    Turkey turkey;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TurkeyAdapter</span><span class="params">(Turkey turkey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.turkey = turkey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        turkey.gobble();  <span class="comment">// 完成转换</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;  <span class="comment">// 火鸡的飞行距离短，多调用几次</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            turkey.fly();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/adapter-pattern-and-facade-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/command-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/command-pattern/" class="post-title-link" itemprop="url">命令模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-10 14:12:55" itemprop="dateModified" datetime="2020-06-10T14:12:55+08:00">2020-06-10</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入遥控器-api">导入：遥控器 API</h1><p>设计一个家电自动化遥控器的 API。这个遥控器具有七个可编程的插槽，每个插槽都有对应的开关按钮。这个遥控器还具备一个整体的撤销按钮。我们希望创建一组控制遥控器的 API，让每个插槽都能控制一个或一组装置。<strong>请注意，能够控制目前的装置和未来可能出现的装置，这一点是很重要的。</strong></p> <img src="http://www.plantuml.com/plantuml/svg/VO_D2i8m48JlVOeSzJbQ544GhFGUcsqIIB8XFnOHtzqM4ngncjFiCFjbHqW61BGDTw91Ny5LOdPwwNe5LQ-ez-GekGZaKP7feTbits8O9lLCaHgKaeR_ISwAILtiNBhVIG_XO6mCjQ36W5hS3bNKK53sr54E3Q9Bj6ZpRpXci0-ONJMVU38VqrgL7JK9AAPCYcjWCkgyY-FNtHn2Qm5OmMi3EC2_LMkswEPM36VA9AwLVm40"><p>类的接口各有差异。麻烦还不只是这样，这些类以后还会越来越多。所以设计一个遥控器 API 变得很有挑战性。</p><p>遥控器应该知道如何解读按钮被按下的动作，然后发出正确的请求，但是遥控器不需知道这些家电自动化的细节。我们不想让遥控器包含一大堆 if 语句，例如 <code>if slot1 == Light then light.on(), else if slot1 == GarageDoor then garageDoor.up()</code>。大家都知道这样的设计很糟糕。</p><h1 id="命令模式">命令模式</h1><p>命令模式可将“动作的请求者”（遥控器）从“动作的执行者”（家电装置）对象中解耦。</p><p>怎么能将它们解耦？采用“命令对象”就可以办到。把请求（例如“打开电灯”）封装成一个特定对象。如果对每个按钮都存储一个命令对象，那么当按钮被按下的时候，就可以请”命令对象“做相关的工作。遥控器并不需要知道工作的内容是什么，只要有个命令对象能和正确的对象（即家电装置）沟通，把事情做好就可以了。</p><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/command-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/singleton-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/singleton-pattern/" class="post-title-link" itemprop="url">单件模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-10 14:12:09" itemprop="dateModified" datetime="2020-06-10T14:12:09+08:00">2020-06-10</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>有一些对象其实我们只需要一个，比方说：线程池（threadpool）、缓存（cache）、对话框、处理偏好设置和注册表（registry）的对象、日志对象，充当打印机、显卡等设备的驱动程序的对象。事实上，这类对象只能有一个实例，如果制造出多个实例，就会导致许多问题产生，例如：程序的行为异常、资源使用过量，或者是不一致的结果。</p><p>单件模式是经得起时间考验的方法，可以确保只有一个实例会被创建。单件模式也给了我们一个全局访问点，和全局变量一样方便，有没有全局变量的缺点。什么缺点？举例来说：如果将对象赋值给一个全局变量，那么你必须在程序已开始就创建好对象（这其实和实现有关。有些 JVM 的实现是：在用到的时候才创建对象），对吧？万一这个对象非常耗费资源，而程序在这次的执行过程中又一直没用到它，不就形成浪费了吗？</p><h1 id="定义单件模式">定义单件模式</h1><blockquote><p><strong>单件模式</strong>确保一个类只有一个实例，并提供一个全局访问点。</p></blockquote> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYNd91ONAmHdvgNdf9RavobKSoae51HbbYMMf2A9bkPb5fQcUkOLboJc9QU2b9GcvMGcAm3v9K0AeJ0zjGIcIaCJgAuwDxKa8p-bLa5VN-5fwxOdkwSzcxRpsUQfNBLS24swTWWJ0000"><h1 id="经典的单件模式实现">经典的单件模式实现</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">        uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> uniqueInstance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个版本有一个问题。有多个线程要执行 <code>Singleton.getInstance()</code> 时，可能会产生不同的对象。</p><table><thead><tr class="header"><th>线程一</th><th>线程二</th><th>uniqueInstance</th></tr></thead><tbody><tr class="odd"><td><code>public static Singleton getInstance() {</code></td><td></td><td><code>null</code></td></tr><tr class="even"><td></td><td><code>public static Singleton getInstance() {</code></td><td><code>null</code></td></tr><tr class="odd"><td><code>if (uniqueInstance == null) {</code></td><td></td><td><code>null</code></td></tr><tr class="even"><td></td><td><code>if (uniqueInstance == null) {</code></td><td><code>null</code></td></tr><tr class="odd"><td><code>uniqueInstance = new Singleton();</code></td><td></td><td><code>&lt;object1&gt;</code></td></tr><tr class="even"><td><code>return uniqueInstance;</code></td><td></td><td><code>&lt;object1&gt;</code></td></tr><tr class="odd"><td></td><td><code>uniqueInstance = new Singleton();</code></td><td><code>&lt;object2&gt;</code></td></tr><tr class="even"><td></td><td><code>return uniqueInstance;</code></td><td><code>&lt;object2&gt;</code></td></tr></tbody></table><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/singleton-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/factory-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/factory-pattern/" class="post-title-link" itemprop="url">工厂模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-10 14:12:32" itemprop="dateModified" datetime="2020-06-10T14:12:32+08:00">2020-06-10</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入比萨店">导入：比萨店</h1><p>身为比萨店的主人，你的代码可能这么写：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Pizza pizza = <span class="keyword">new</span> Pizza();</span><br><span class="line"></span><br><span class="line">    pizza.prepare();</span><br><span class="line">    pizza.bake();</span><br><span class="line">    pizza.cut();</span><br><span class="line">    pizza.box();</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="当看到-new就会想到具体">当看到 &quot;new&quot;，就会想到具体</h2><p>是的，当使用 &quot;new&quot; 时，你的确是在实例化一个具体类，所以用的的确是实现，而不是接口。</p><p>当你需要更多比萨类型时，通常会写出这样的代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Pizza <span class="title">orderPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">    Pizza pizza;</span><br><span class="line">    <span class="comment">// 这是变化的部分，随着时间过去，比萨菜单改变，这里必须一改再改</span></span><br><span class="line">    <span class="keyword">if</span> (type.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">"pepperoni"</span>)) &#123;</span><br><span class="line">        pizza = <span class="keyword">new</span> PepperoniPizza();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 这里是不变的部分</span></span><br><span class="line">    pizza.prepare();</span><br><span class="line">    pizza.bake();</span><br><span class="line">    pizza.cut();</span><br><span class="line">    pizza.box();</span><br><span class="line">    <span class="keyword">return</span> pizza;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当代码使用大量的具体类时，等于是自找麻烦，因为一旦加入新的具体类，就必须修改代码。也就是说，你的代码并非“对修改关闭”。</p><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/factory-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/decorator-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/decorator-pattern/" class="post-title-link" itemprop="url">装饰者模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-09 18:26:26" itemprop="dateModified" datetime="2020-06-09T18:26:26+08:00">2020-06-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>本章可以成为 <strong>“给爱用继承的人一个全新的设计眼界”。</strong>我们即将再度探讨典型的继承滥用问题。你将在本章学到如何使用对象组合的方式，做到在运行时装饰类。一旦你熟悉了装饰的技巧，你将能够在不修改任何底层代码的情况下，给你的（或别人的）对象赋予新的职责。</p><h1 id="导入星巴兹咖啡">导入：星巴兹咖啡</h1><p>星巴兹（Starbuzz）是以扩张速度最快而闻名的咖啡连锁店。因为扩张速度实在太快了，他们准备更新订单系统，以合乎他们的饮料供应系统。他们原先的类设计是这样的……</p> <img src="http://www.plantuml.com/plantuml/svg/ROyn2i90403xUyMMMaW-O1KYMFk3osKrmSGBjwSWCM2XXRrQYBNO2uBu6z7a6oPgeeR0DZV3xR2kvo1W4Eef11ZOg9YR4-4fuIFZDcd5XGOJ9wZu025Y00wIK5weFJdANWFKrXSqcXcAYdyn24dwpGBKhdHYC0nuBC_twpRPhzBrCTqjakqbEMrkyqCsB6R2vqJGbMD2qyUHysf-zXJMuchOavnqhKJ1-tMYGw528ldlojlQirRhfriHPRBAyrg55Q4d"><p>购买咖啡时，也可以要求在其中加入各种调料，例如：蒸奶（Steamed Milk）、豆浆（Soy）、摩卡（Mocha，也就是巧克力风味或覆盖奶泡（Whip）。星巴兹会根据所加入的调料收取不同的费用。所以订单系统必须考虑到这些调料部分。</p><p>利用实例变量和继承，追踪这些调料。</p> <img src="http://www.plantuml.com/plantuml/svg/RL5DIyD04BtdLyonHThYiUYfLF3YHG-Ujvkn2KswOMUhb1WGr4EleX75YpTFHH4KwT-fIVqNJbgprk1fvhqt7szsFTz5m30oOmWnxA5sl8AHlfO1Eg97HWjfe8F7g4KV8NO0N2If_SZuQiWez8C11rBZ0YZf2OuddXznwAFf_XRNwan9HQPMXnXQBLXC7_FfRJOvonucY-VpBBtBxo_ci_UlgnT872xs1Etn-6KZeR4vymTgND9bMbGN-ssv1QmSigDI-CaPn24QJxb9uURpycq-IzbAVlt4FhBq8tkzSH971e88TjM8i1FWq5s-mUeCgtQ57kmhGMPDv1ircf4UmcQptOODe564khaIj_X0sunI7FqtTOSYZKJghsR_OlkqqLZpLH6ifIfVRAjmvQ9l"><p>当哪些需求或因素改变时会影响这个设计？</p><ul><li>调料价钱的改变会使我们更改现有代码。（这个比较好解决，增加设置调料价格的 <code>setter</code> 方法即可）</li><li>一旦出现新的调料，我们就需要加上新的方法，并改变超类中的 <code>cost()</code> 方法。（无解）</li><li>以后可能会开发处新饮料，对这些饮料而言（例如，冰茶），某些调料可能并不合适，但是在这个设计方式中，Tea 子类仍将继承哪些不适合的方法，例如：<code>hasWhip()</code>。</li><li>万一顾客想要双倍摩卡咖啡，怎么办？（这个也比较好解决，将 <code>soy</code> 的类型设置为 <code>int</code>）</li></ul><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/decorator-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/observer-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/observer-pattern/" class="post-title-link" itemprop="url">观察者模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-09 18:16:41" itemprop="dateModified" datetime="2020-06-09T18:16:41+08:00">2020-06-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入internet气象观测站">导入：Internet气象观测站</h1><p>气象站建立在 <code>WeatherData</code> 对象上，由 <code>WeatherData</code> 对象负责追踪目前的天气状况（温度、湿度、气压）。我们希望能建立一个应用，有三种布告板，分别显示目前的状况、气象统计以及简单的预报。当 <code>WeatherData</code> 对象获得最新的测量数据时，三种布告板必须实时更新。</p><p>而且，这是一个可以扩展的气象站，我们希望公布一组 API，好让其他开发人员可以写出自己的布告板，并插入此应用中。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYNd91ONAuId9fPaf1Qv99OaAbHpAIYafvQ40BMa5YMMb1QbQcX2X3nASpDJCaigOVo0ejJYOfXyRceYY9sRcbTIx9oHc9UUcgAXgL2jeA-ly6H7mxFfovvjcF9Yuy9dMxjVjlS_cxtbsRGDx_VqF5kxvDcqdSysJtsoPzQBHQjVR6X-FcM5GYrNBG00"><h2 id="错误示范">错误示范</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// 实例变量声明</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">measurementsChanged</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">float</span> temp = getTemperature();</span><br><span class="line">      <span class="keyword">float</span> humidity = getHumidity();</span><br><span class="line">      <span class="keyword">float</span> pressure = getPressure();</span><br><span class="line"></span><br><span class="line">      currentConditionsDisplay.update(temp, humidity, pressure);</span><br><span class="line">      statisticsDisplay.update(temp, humidity, pressure);</span><br><span class="line">      forecastDisplay.update(temp, humidity, pressure);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他WeatherData方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个实现中，下列哪种说法正确？（多选）</p><ul><li>[x] A. 我们是针对具体实现编程，而非针对接口。（三个布告板都是实现）</li><li>[x] B. 对于每个新的布告板，我们都得修改代码。</li><li>[x] C. 我们无法在运行时动态地增加（或删除）布告板。</li><li>[ ] D. 布告板没有实现一个共同的接口。（<code>update(temp, humidity, pressure)</code>看恰里像是一个统一的接口）</li><li>[x] E. 我们尚未封装改变的部分。（<code>display.update</code>是会改变的部分）</li><li>[ ] F. 我们侵犯了 <code>WeatherData</code> 类的封装。</li></ul><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/observer-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/notes/head-first-design-patterns/strategy-pattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/notes/head-first-design-patterns/strategy-pattern/" class="post-title-link" itemprop="url">策略模式</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-09 17:48:10" itemprop="dateModified" datetime="2020-06-09T17:48:10+08:00">2020-06-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/notes/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="导入鸭子游戏">导入：鸭子游戏</h1><p>鸭子游戏：游戏中会出现各种鸭子，一边游泳戏水，一边呱呱叫。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYKc5PSK9IQNABYK9cShL7CfA1IM9YPdQsW2MSNbcRbWHZLCLQr2IcPnGKvY9KGuDxKa8p-bLa5VN-7bZhLFrqvuFglbQUks9xkdFPksyzdcgLorNCavYSN52hw9EJc9HIbmE-2cA5I3D3zTCkt5ygPdCzO_txt_wP8j2hLmZK6fAHcfYKHetBK8JMDf4j2hw9w2w7gnhEtvx6dFEYOydR0HXFfN0pNYDllPoeNFPwq3UX1iFDX8cnfTNMHF8OaYkHXP5EuS0000"><p>现在我们让鸭子会飞。只需要在 <code>Duck</code> 类中加上 <code>fly()</code> 方法，然后所有鸭子都会继承 <code>fly()</code>。</p> <img src="http://www.plantuml.com/plantuml/svg/oyXCILL8pIqegLJ8JSrDIYtYoW2996SM9UUaSYKc5PSK9IQNABYK9cShL7CfA1IM9YPdQsW2MSNbcRbWXfPMMawbXgQM5f1T3TDHgv2IMLoGarW9LbATcrgIaPzIgw2lh_1onzgdQoSydzNoj7NRaztJdatR-MppLAvQhkISnE9Y1T_4d9p4eXIuVN1J5Af1cfykcVPYUTEp6UkVxzx_TCaMXLgung3Kb8pKH28qxbg4fh4q2UXjT0z2TBrOrlPyzhHd7HEUJjW8GlshWHfnc_rivSBdizO1FGWs7coaJOskBhAda4IHN8mi2dSELrv-IQf2JcfQYK9-6ZW6h1IURT_zj6i1EBmX0GS0"><p>但是，可怕的问题发生了，有很多“橡皮鸭子”飞来飞去。在超类中加上 <code>fly()</code>，就会导致所有的子类都具备 <code>fly()</code>，连那些不该具备 <code>fly()</code> 的子类也无法免除。</p><p><strong>当涉及“维护”时，为了“复用”（reuse）目的而使用继承，结局并不完美。</strong></p><div class="post-button"> <a class="btn" href="/notes/head-first-design-patterns/strategy-pattern/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/programming/leetcode/range-sum-query/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/programming/leetcode/range-sum-query/" class="post-title-link" itemprop="url">Range Sum Query</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-05 08:39:12" itemprop="dateModified" datetime="2020-06-05T08:39:12+08:00">2020-06-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="range-sum-query---immutable">Range Sum Query - Immutable</h1><p>Given an integer array <em>nums</em>, find the sum of the elements between indices <em>i</em> and <em>j (i ≤ j)</em>, inclusive.</p><p>Example:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Given nums = [-2, 0, 3, -5, 2, -1]</span><br><span class="line"></span><br><span class="line">sumRange(0, 2) -&gt; 1</span><br><span class="line">sumRange(2, 5) -&gt; -1</span><br><span class="line">sumRange(0, 5) -&gt; -3</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ol type="1"><li>You may assume that the array does not change.</li><li>There are many calls to <em>sumRange</em> function.</li></ol><h2 id="caching-on2-space">Caching: O(n^2) Space</h2><p>Imagine that <em>sumRange</em> is called one thousand times with the exact same arguments. How could we speed that up?</p><p>We could trade in extra space for speed. By pre-computing all range sum possibilities and store its results in a hash table, we can speed up the query to constant time.</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Time: O(n^2) time pre-computing + O(1) time per query</span></span><br><span class="line"><span class="comment"># Space: O(n^2)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: list)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        self.data = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            s = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i, n):</span><br><span class="line">                s += nums[j]</span><br><span class="line">                self.data[i, j] = s</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.data[i, j]</span><br></pre></td></tr></table></figure><h2 id="caching-on-space">Caching: O(n) Space</h2><p>Imagine that we pre-compute the cummulative sum from index <code>0</code> to <code>k</code>. Could we use this information to derive <code>sumRange(i, j)</code>?</p><p>Let us define <code>sum[k]</code> as the cumulative sum for <code>nums[0 .. k-1]</code>: <code>sumRange(i, j) = sum[j + 1] - sum[i]</code>.</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Time: O(n) time pre-computing and O(1) time per query</span></span><br><span class="line"><span class="comment"># Space: O(n)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumArray</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, nums: list)</span>:</span></span><br><span class="line">        n = len(nums)</span><br><span class="line">        self.sum = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(n):</span><br><span class="line">            self.sum[k + <span class="number">1</span>] = self.sum[k] + nums[k]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sumRange</span><span class="params">(self, i: int, j: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> self.sum[j + <span class="number">1</span>] - self.sum[i]</span><br></pre></td></tr></table></figure><div class="post-button"> <a class="btn" href="/programming/leetcode/range-sum-query/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cwscn.github.io/programming/leetcode/longest-increasing-subsequence/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar/nekosensei.png"><meta itemprop="name" content="菜农陈文生"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="水滴"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a href="/programming/leetcode/longest-increasing-subsequence/" class="post-title-link" itemprop="url">Longest Increasing Subsequence</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-06-06 13:44:02" itemprop="dateModified" datetime="2020-06-06T13:44:02+08:00">2020-06-06</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>Given an unsorted array of integers, find the length of longest increasing subsequence.</p><p>Example:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: [10,9,2,5,3,7,101,18]</span><br><span class="line">Output: 4</span><br><span class="line">Explanation: The longest increasing subsequence is [2,3,7,101], therefore the lenght is 4.</span><br></pre></td></tr></table></figure><p><strong>Note:</strong></p><ul><li>There may be more than on LIS combination, it is only necessary for you to return the length.</li><li>Your algorithm shoud run in O(n^2) complexity.</li></ul><p><strong>Follow up:</strong> Could you improve it to O(nlog(n)) time complexity?</p><h1 id="recursion">Recursion</h1><p>Define a function <code>helper(i)</code> returns the length of LIS that ends at <code>i</code>. Then answer of an input shoule be <code>max([helper(i) | 0 &lt;= i &lt; n])</code>.</p><p>To calculate <code>helper(i)</code>, we use a variable <code>res</code> which initialized to 1 to store the result. Then we find every number <code>nums[j] &lt; nums[i], 0 &lt;= j &lt; i</code>, let <code>res = max(res, helper(j) + 1)</code>.</p><div class="post-button"> <a class="btn" href="/programming/leetcode/longest-increasing-subsequence/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="菜农陈文生" src="/uploads/avatar/nekosensei.png"><p class="site-author-name" itemprop="name">菜农陈文生</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">124</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">129</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2019 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">菜农陈文生</span></div><script src="//cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><script src="/js/aplayer-el.js"></script><script src="//unpkg.com/video.js/dist/video.min.js"></script><script src="/js/videojs-bilibili.js"></script><script src="/js/videojs-bilibili-el.js"></script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script src="/js/local-search.js"></script><div id="pjax"><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Axl15EIRi5o5AatKaxXxV4Oq-gzGzoHsz',
      appKey     : 'E0qm04UjsP0qQN1l8ME3GQ25',
      placeholder: "Just go go",
      avatar     : 'identicon',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></div></body></html>